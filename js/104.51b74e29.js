"use strict";(self["webpackChunkeshop"]=self["webpackChunkeshop"]||[]).push([[104],{4104:function(e,t,s){s.r(t),s.d(t,{default:function(){return De}});s(7658);var i=s(6252),o=s(3577),n=s(9963);const r={class:"bg-dark w-100 h-100 overflow-hidden position-relative auto-height"},a={class:"container pt-utility text-white position-relative auto-height-content"},d={class:"row"},l=(0,i._)("h1",{class:"title-01"},"購物車無加入商品",-1),c=(0,i._)("button",{type:"button",class:"btn btn-light fw-bold mt-5"},"前往商城 ",-1),m={class:"row mx-0"},u={class:"col-12 p-0 my-4"},p={class:"d-flex justify-content-between align-items-center pb-3 border-bottom-404040"},h=(0,i._)("h1",{class:"mb-0 text-center tracking-widest font-bold text-3xl"}," 購物車 ",-1),v={class:"row"},f={class:"d-flex d-md-none justify-content-between pb-2 mb-2 tracking-wide"},b=["onClick"],x={class:"d-flex"},w={class:"mx-auto cartsInput-sm-Item"},g=["onClick","onKeydown"],_={for:"smNum"},C=["disabled","onChange","value"],y=["onClick","onKeydown"],k={class:"d-flex"},L={class:"carts-pic"},D=["src"],B={class:"ms-3 d-flex flex-column justify-content-between text-2xl"},E={class:"tracking-wide font-semibold"},T={class:"d-none d-md-inline-block"},$={class:"leading-7 tracking-wider text-lg"},P={class:"leading-7 d-block tracking-wider text-xl"},I={class:"ms-auto cartsInput-md-container d-none d-md-inline-block"},O={class:"cartsInput-md-Item d-flex align-items-center"},Z=["onClick","onKeydown"],N={class:"cartsInput-md-input text-xl"},K={for:"num",class:"d-block h-100"},q=["onUpdate:modelValue","onChange"],z=["onClick","onKeydown"],A=["onClick","onKeydown"],M=(0,i._)("i",{class:"bi bi-trash3-fill fs-3"},null,-1),S=[M],U={class:"text-white text-end tracking-widest font-semibold text-xl pb-3"},V={class:"row pb-5"},W={class:"col-12 mb-5"},X={class:"form-check text-end"},j={class:"form-check-label text-white text-xl ms-auto",for:"check"},H={class:"col-12 text-end"};function Q(e,t,s,M,Q,F){const Y=(0,i.up)("Loading"),R=(0,i.up)("Navbar"),G=(0,i.up)("RouterLink"),J=(0,i.up)("DeleteCartsAll"),ee=(0,i.up)("DeleteCarts"),te=(0,i.up)("Footer");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(Y,{active:Q.isLoading,"onUpdate:active":t[0]||(t[0]=e=>Q.isLoading=e)},null,8,["active"]),(0,i.Wm)(R),(0,i._)("div",r,[(0,i._)("div",a,[(0,i._)("div",d,[(0,i._)("div",{class:(0,o.C_)(["col-12 text-center",{"d-none":Q.cartsSwitch}]),style:{padding:"20vh 0"}},[l,(0,i.Wm)(G,{to:"/user/products",class:"text-decoration-none"},{default:(0,i.w5)((()=>[c])),_:1})],2)]),(0,i._)("div",{class:(0,o.C_)({"d-none":!Q.cartsSwitch})},[(0,i._)("div",m,[(0,i._)("div",u,[(0,i._)("div",p,[h,(0,i._)("div",null,[(0,i._)("button",{type:"button",class:"btn btn-light fw-bold",onClick:t[1]||(t[1]=t=>e.$refs.DeleteCartsAll.modalShow())}," 刪除全部 "),(0,i._)("button",{type:"button",class:"btn btn-light fw-bold ms-2",onClick:t[2]||(t[2]=t=>e.$router.push("/user/products"))}," 繼續購物 ")])])])]),(0,i._)("div",v,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Q.cartsData.carts,((t,s)=>((0,i.wg)(),(0,i.iD)("div",{class:"col-12 mt-4 mb-2",key:t.id},[(0,i._)("div",f,[(0,i._)("button",{type:"button",class:"btn btn-light fw-bold ms-2",onClick:e=>F.open(t,s)}," 編輯 ",8,b),(0,i._)("p",null,(0,o.zw)(t.product.category)+"類",1)]),(0,i._)("div",{class:"d-md-none cartsInput-sm-container position-absolute mx-auto mt-1 mb-2 text-white",ref_for:!0,ref:"left",style:{transform:"translateX(-500px)"}},[(0,i._)("div",x,[(0,i._)("div",w,[(0,i._)("div",{class:"border text-center cartsInput-sm-add cursor-pointer",onClick:e=>F.add(t.id,s),onKeydown:e=>F.add(t.id,s)}," + ",40,g),(0,i._)("label",_,[(0,i._)("input",{name:"smNum",id:"smNum",disabled:Q.isLoading,ref_for:!0,ref:"updateValue",onChange:e=>F.updateQty(t.id,s),class:"d-block text-center text-white border cartsInput-sm-input",type:"text",min:"1",value:t.qty},null,40,C)]),(0,i._)("div",{class:"border text-center cartsInput-sm-min cursor-pointer",onClick:e=>F.min(t.id,s),onKeydown:e=>F.min(t.id,s)}," - ",40,y)])])],512),(0,i._)("div",{class:"d-flex align-items-center cartsItem pb-5",ref_for:!0,ref:"right",style:{transform:"translateX(0px)"}},[(0,i._)("div",k,[(0,i._)("div",L,[(0,i._)("img",{src:t.product.imageUrl,class:"carts-img",alt:"新增至購物車內的圖片"},null,8,D)]),(0,i._)("div",B,[(0,i._)("p",E,[(0,i.Uk)((0,o.zw)(t.product.title)+" ",1),(0,i._)("span",T," ("+(0,o.zw)(t.product.unit)+") ",1)]),(0,i._)("p",$," 單價"+(0,o.zw)(t.product.price)+"$ ",1),(0,i._)("p",P," 小計"+(0,o.zw)(e.$filters.currency(t.total))+"$ ",1)])]),(0,i._)("div",I,[(0,i._)("div",O,[(0,i._)("div",{onClick:e=>F.min(t.id,s),onKeydown:e=>F.min(t.id,s),class:"cartsInput-md-min cursor-pointer text-center border"}," - ",40,Z),(0,i._)("div",N,[(0,i._)("label",K,[(0,i.wy)((0,i._)("input",{id:"num",name:"num","onUpdate:modelValue":e=>t.qty=e,type:"text",min:"1",style:{"max-width":"120px"},class:"d-block border rounded-0 bg-dark text-center text-white border w-100",onChange:e=>F.updateQty(t.id,s),ref_for:!0,ref:"updateValue"},null,40,q),[[n.nr,t.qty]])])]),(0,i._)("div",{onClick:e=>F.add(t.id,s),onKeydown:e=>F.add(t.id,s),class:"cartsInput-md-add cursor-pointer text-center border"}," + ",40,z)])]),(0,i._)("div",{class:"ms-auto ms-md-3 delete text-center cartsInput-trash cursor-pointer",onClick:e=>F.openDeleteCarts(t),onKeydown:e=>F.openDeleteCarts(t)},S,40,A)],512)])))),128)),(0,i._)("p",U,"總計 "+(0,o.zw)(e.$filters.currency(Q.cartsData.total))+" $ ",1)]),(0,i._)("div",V,[(0,i._)("div",W,[(0,i._)("div",X,[(0,i._)("label",j,[(0,i.wy)((0,i._)("input",{class:"form-check-input",type:"checkbox",value:"",id:"check","onUpdate:modelValue":t[3]||(t[3]=e=>Q.selection=e)},null,512),[[n.e8,Q.selection]]),(0,i.Uk)(" 我已確認商品資訊 ")])])]),(0,i._)("div",H,[(0,i._)("button",{type:"button",class:(0,o.C_)(["btn btn-light fw-bold",{"not-allowed":!Q.selection}]),onClick:t[4]||(t[4]=(...e)=>F.contactMethod&&F.contactMethod(...e))}," 下一步 ",2)])])],2)]),(0,i.Wm)(J,{ref:"DeleteCartsAll",onCheckDeleteAll:F.deleteCarts},null,8,["onCheckDeleteAll"]),(0,i.Wm)(ee,{ref:"DeleteCarts",onCheckDelete:F.deleteProduct},null,8,["onCheckDelete"])]),(0,i.Wm)(te)],64)}var F=s(358),Y=s(5790),R=s(2336),G=s(5820);const J={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},ee={class:"modal-dialog",style:{margin:"30vh auto"}},te={class:"modal-content text-black"},se=(0,i._)("div",{class:"modal-header"},[(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ie=(0,i._)("div",{class:"modal-body title-01 text-center py-5"}," 清除購物車 ",-1),oe={class:"modal-footer"},ne=(0,i._)("button",{type:"button",class:"btn btn-primary fw-bold","data-bs-dismiss":"modal"},"取消 ",-1);function re(e,t,s,o,n,r){return(0,i.wg)(),(0,i.iD)("div",J,[(0,i._)("div",ee,[(0,i._)("div",te,[se,ie,(0,i._)("div",oe,[ne,(0,i._)("button",{type:"button",class:"btn btn-danger fw-bold",onClick:t[0]||(t[0]=t=>e.$emit("checkDeleteAll"))},"確定刪除 ")])])])],512)}var ae=s(1339),de={data(){return{modal:{}}},mixins:[ae.Z]},le=s(3744);const ce=(0,le.Z)(de,[["render",re]]);var me=ce;const ue={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},pe={class:"modal-dialog",style:{margin:"30vh auto"}},he={class:"modal-content text-black"},ve=(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"exampleModalLabel"},"刪除品項 "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),fe={class:"modal-body title-01 text-center py-5"},be={class:"modal-footer"},xe=(0,i._)("button",{type:"button",class:"btn btn-primary fw-bold","data-bs-dismiss":"modal"},"取消 ",-1);function we(e,t,s,n,r,a){return(0,i.wg)(),(0,i.iD)("div",ue,[(0,i._)("div",pe,[(0,i._)("div",he,[ve,(0,i._)("div",fe,[(0,i._)("p",null,(0,o.zw)(r.deleteData.title),1),(0,i._)("p",null,(0,o.zw)(r.deleteNum.qty)+"/"+(0,o.zw)(r.deleteData.unit),1)]),(0,i._)("div",be,[xe,(0,i._)("button",{type:"button",class:"btn btn-danger fw-bold",onClick:t[0]||(t[0]=t=>e.$emit("checkDelete"))},"確定刪除 ")])])])],512)}var ge={data(){return{modal:{},deleteData:{},deleteNum:{}}},mixins:[ae.Z],mounted(){G.Z.on("delete-data",(e=>{this.deleteData=e.product,this.deleteNum=e}))}};const _e=(0,le.Z)(ge,[["render",we]]);var Ce=_e;const ye=s(6455);var ke={data(){return{cartsData:{},deleteItem:{},isLoading:!1,cartsSwitch:!1,openDoor:!1,selection:!1,num:1}},components:{Navbar:F.Z,Footer:Y.Z,Loading:R.Z,DeleteCartsAll:me,DeleteCarts:Ce},methods:{getData(){const e="https://vue3-course-api.hexschool.io/api/dessertsweet/cart";this.cartsSwitch=!0,this.isLoading=!0,this.axios.get(e).then((e=>{this.cartsData=e.data.data,this.isLoading=!1,0===this.cartsData.carts.length&&(this.cartsSwitch=!1)})).catch((()=>{const e=ye.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ye.stopTimer),e.addEventListener("mouseleave",ye.resumeTimer)}});e.fire({icon:"error",title:"連線異常"})}))},deleteProduct(){const{id:e}=this.deleteItem,t=`https://vue3-course-api.hexschool.io/api/dessertsweet/cart/${e}`;this.axios.delete(t).then((()=>{this.$refs.DeleteCarts.modalHide(),G.Z.emit("updateCartsNum",0);const e=ye.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ye.stopTimer),e.addEventListener("mouseleave",ye.resumeTimer)}});e.fire({icon:"success",title:"刪除品項成功"}),this.getData()})).catch((()=>{const e=ye.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ye.stopTimer),e.addEventListener("mouseleave",ye.resumeTimer)}});e.fire({icon:"error",title:"連線異常"})}))},openDeleteCarts(e){this.$refs.DeleteCarts.modalShow(),G.Z.emit("delete-data",e),this.deleteItem=e},deleteCarts(){const e="https://vue3-course-api.hexschool.io/api/dessertsweet/carts";this.$refs.DeleteCartsAll.modalHide(),this.axios.delete(e).then((e=>{if(this.getData(),G.Z.emit("updateCartsNum",0),e.data.success){const e=ye.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ye.stopTimer),e.addEventListener("mouseleave",ye.resumeTimer)}});e.fire({icon:"success",title:"刪除成功"})}else{const e=ye.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ye.stopTimer),e.addEventListener("mouseleave",ye.resumeTimer)}});e.fire({icon:"error",title:"更新異常"})}})).catch((()=>{const e=ye.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ye.stopTimer),e.addEventListener("mouseleave",ye.resumeTimer)}});e.fire({icon:"error",title:"連線異常"})}))},updateQty(e,t){const s=Number(this.$refs.updateValue[t].value);if(s<=0||s>=50){const e=ye.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ye.stopTimer),e.addEventListener("mouseleave",ye.resumeTimer)}});return e.fire({icon:"warning",title:"請輸入正確數字:等於1小於51"}),void this.getData()}const i={product_id:e,qty:s},o=`https://vue3-course-api.hexschool.io/api/dessertsweet/cart/${e}`;this.isLoading=!0,this.axios.put(o,{data:i}).then((e=>{if(this.getData(),e.data.success){this.isLoading=!1;const e=ye.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ye.stopTimer),e.addEventListener("mouseleave",ye.resumeTimer)}});e.fire({icon:"success",title:"更新品項成功"})}else{this.isLoading=!1;const e=ye.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ye.stopTimer),e.addEventListener("mouseleave",ye.resumeTimer)}});e.fire({icon:"error",title:"更新異常"})}})).catch((()=>{const e=ye.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ye.stopTimer),e.addEventListener("mouseleave",ye.resumeTimer)}});e.fire({icon:"error",title:"連線異常"})})),G.Z.emit("updateCartsNum")},contactMethod(){if(!1!==this.selection)this.$router.push("/user/ordercontact");else{const e=ye.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ye.stopTimer),e.addEventListener("mouseleave",ye.resumeTimer)}});e.fire({icon:"info",title:'確認訂單完成後<br>記得勾選我已確認商品資訊 <i class="bi bi-emoji-smile-fill"></i>'})}},open(e,t){!0===this.openDoor?(this.$refs.right[t].style.transform="translateX(0px)",this.$refs.left[t].style.transform="translateX(-500px)",this.openDoor=!1):!0!==this.openDoor&&(this.$refs.right[t].style.transform="translateX(100px)",this.$refs.left[t].style.transform="translateX(0px)",this.openDoor=!0)},add(e,t){if(this.num=this.cartsData.carts[t].qty,this.num+=1,this.num>=50){this.$refs.updateValue[t].value=1,this.getData();const e=ye.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ye.stopTimer),e.addEventListener("mouseleave",ye.resumeTimer)}});return void e.fire({icon:"",title:"單筆數量不超過50"})}const s={product_id:e,qty:this.num},i=`https://vue3-course-api.hexschool.io/api/dessertsweet/cart/${e}`;this.isLoading=!0,this.axios.put(i,{data:s}).then((()=>{this.isLoading=!1;const e=ye.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ye.stopTimer),e.addEventListener("mouseleave",ye.resumeTimer)}});e.fire({icon:"success",title:"更新品項成功"}),this.getData(),G.Z.emit("updateCartsNum")})).catch((()=>{const e=ye.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ye.stopTimer),e.addEventListener("mouseleave",ye.resumeTimer)}});e.fire({icon:"error",title:"更新異常"})}))},min(e,t){if(this.num=this.cartsData.carts[t].qty,this.num-=1,this.num<=0){const e=ye.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ye.stopTimer),e.addEventListener("mouseleave",ye.resumeTimer)}});return void e.fire({icon:"",title:"單筆數量不得低於1"})}const s={product_id:e,qty:this.num},i=`https://vue3-course-api.hexschool.io/api/dessertsweet/cart/${e}`;this.isLoading=!0,this.axios.put(i,{data:s}).then((()=>{this.isLoading=!1;const e=ye.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ye.stopTimer),e.addEventListener("mouseleave",ye.resumeTimer)}});e.fire({icon:"success",title:"更新品項成功"}),this.getData(),G.Z.emit("updateCartsNum")})).catch((()=>{const e=ye.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ye.stopTimer),e.addEventListener("mouseleave",ye.resumeTimer)}});e.fire({icon:"error",title:"更新異常"})}))}},mounted(){this.getData()}};const Le=(0,le.Z)(ke,[["render",Q]]);var De=Le}}]);
//# sourceMappingURL=104.51b74e29.js.map