"use strict";(self["webpackChunkeshop"]=self["webpackChunkeshop"]||[]).push([[859],{4866:function(t,e,s){s.r(e),s.d(e,{default:function(){return V}});var i=s(6252),o=s(3577),r=s(9963),a=s.p+"img/productBanner.686edc4a.png";const n={class:"container-fluid pt-utility auto-height"},d={class:"row auto-height-content"},c=(0,i.uE)('<div class="col-12 col-md-9 mx-auto p-0"><div class="position-relative"><img src="'+a+'" class="w-100 productBanner" alt="全部商品圖片"><div class="position-absolute top-50 translate-middle-y" style="right:20%;"><h2 class="text-3xl font-medium tracking-widest logo_font"> healthy、simple、 <i class="bi bi-emoji-smile"></i></h2></div></div></div>',1),l={class:"col-12 col-md-9 mx-auto p-0 d-flex align-items-center justify-content-between"},p={for:"search"},u={class:"ps-3 px-md-0 d-flex flex-wrap justify-content-end align-items-center my-3"},m={for:"sort",class:"text-white tracking-wide font-medium pe-2 pe-md-0 pb-md-1 d-inline-block"},h={class:"bg-white d-inline-block",style:{"max-width":"300px","border-radius":"5px"}},v=(0,i._)("option",{selected:"selected",disabled:"disabled",class:"d-n",value:""}," 選擇顯示方法 ",-1),g=(0,i._)("option",{value:"熱銷商品"}," 熱銷商品 ",-1),b=(0,i._)("option",{value:"價格排序低到高"}," 價格排序低到高 ",-1),f=(0,i._)("option",{value:"價格排序高到低"}," 價格排序高到低 ",-1),w=[v,g,b,f],x=(0,i._)("div",{class:"spinner-border text-light spinner-border-3rem",role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),_=[x],k={class:"col-12 col-md-9 mx-auto"},y={class:"row"},C=["onClick","onKeydown"],L={key:0,class:"badge bg-danger position-absolute badge-position"},T={key:1,class:"badge bg-dark opacity-50 position-absolute badge-position"},D={class:"product-item position-relative"},N=["src"],B=(0,i._)("div",{class:"w-100 productNotes-container position-absolute bottom-0 start-50"},[(0,i._)("i",{class:"productNotes-icon d-block bi bi-info-square text-4xl position-relative top-50 start-50 text-center"})],-1),E=["onClick","onKeydown"],O={class:"product-content pt-1"},P={class:"product-content-h5 text-base font-medium tracking-wide"},K={class:"d-block d-md-flex justify-content-md-between"},F={class:"product-p"},I=["onClick","onKeydown","disabled"],S=(0,i._)("div",{class:"d-none spinner-border spinner-border-sm",role:"status"},null,-1),U={key:1,class:"w-btn-product w-100 mt-2 opacity-50"},Z=(0,i._)("i",{class:"bi bi-chat-dots-fill chat-icon"},null,-1);function H(t,e,s,a,v,g){const b=(0,i.up)("Loading"),f=(0,i.up)("Navbar"),x=(0,i.up)("RouterLink"),H=(0,i.up)("Footer");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(b,{active:v.isLoading,"onUpdate:active":e[0]||(e[0]=t=>v.isLoading=t)},null,8,["active"]),(0,i.Wm)(f),(0,i._)("div",n,[(0,i._)("div",d,[c,(0,i._)("div",l,[(0,i._)("div",null,[(0,i._)("i",{class:"bi bi-search d-inline-block px-2 fs-4 cursor-pointer",onClick:e[1]||(e[1]=t=>{v.search=!v.search}),onKeypress:e[2]||(e[2]=t=>v.search=!v.search)},null,32),(0,i._)("label",p,[(0,i.wy)((0,i._)("input",{type:"text",name:"search","onUpdate:modelValue":e[3]||(e[3]=t=>v.message=t),class:(0,o.C_)([{"d-none":v.search},"carts-input w-100 border-0 border-bottom text-white"])},null,2),[[r.nr,v.message]])])]),(0,i._)("div",u,[(0,i._)("label",m,[(0,i.Uk)("顯示方法 "),(0,i._)("div",h,[(0,i._)("select",{name:"sort",id:"sort",class:"text-black tracking-wide font-medium px-4 py-1 border-0",onChange:e[4]||(e[4]=t=>g.onChange(t))},w,32)])])])]),(0,i._)("div",{class:(0,o.C_)(["col-12 text-center pt-5",{"d-none":v.productLoading}])},_,2),(0,i._)("div",k,[(0,i._)("div",y,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(g.updateProducts,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"col-6 col-md-6 col-lg-4 col-xl-3 mb-5",key:t.id},[(0,i._)("div",{class:"text-white product-content-container mx-auto cursor-pointer position-relative",onClick:e=>g.more(t.id),onKeydown:e=>g.more(t.id)},[t.num<=5&&t.num>=1?((0,i.wg)(),(0,i.iD)("span",L,"HOT")):0===t.num?((0,i.wg)(),(0,i.iD)("span",T,"SOLD OUT")):(0,i.kq)("",!0),(0,i._)("div",D,[(0,i._)("img",{src:t.imageUrl,class:"position-relative w-100 h-100 product-img",alt:"商品圖片"},null,8,N),B,(0,i._)("div",{class:"fav position-absolute end-0 top-0",onClick:(0,r.iM)((e=>g.addFav(t)),["stop"]),onKeydown:e=>g.addFav(t)},[(0,i._)("i",{class:(0,o.C_)(["bi fs-1 mx-2",v.favoriteData.includes(t.id)?"bi-heart-fill":"bi-heart"])},null,2)],40,E)]),(0,i._)("div",O,[(0,i._)("h5",P,(0,o.zw)(t.title),1),(0,i._)("div",K,[(0,i._)("p",null,[(0,i._)("del",null,(0,o.zw)(t.origin_price)+"$",1),(0,i.Uk)("/ "),(0,i._)("span",F,"優惠價"+(0,o.zw)(t.price)+"$",1)])]),t.num>=1?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,o.C_)([{"opacity-75":v.isLoading},"w-btn-product mt-2 w-100"]),onClick:(0,r.iM)((e=>g.addCart(t,e)),["stop"]),onKeydown:e=>g.addCart(t,e),disabled:v.isLoading},[S,(0,i.Uk)(" 加入購物車 ")],42,I)):((0,i.wg)(),(0,i.iD)("div",U,"已售完"))])],40,C)])))),128))])])])]),(0,i.Wm)(x,{to:"/user/contact",class:(0,o.C_)(["position-fixed text-center end-0 bottom-0 cursor-pointer m-3 border chat-container",{"translateY-70px":!t.scrollIcon}])},{default:(0,i.w5)((()=>[Z])),_:1},8,["class"]),(0,i._)("div",{class:(0,o.C_)([{scrollIconMoveIn:!t.scrollIcon},"scrollTop-container position-fixed text-center end-0 bottom-0 cursor-pointer m-3"]),ref:"scrollTop"},[(0,i._)("div",{onClick:e[5]||(e[5]=(0,r.iM)(((...e)=>t.scrollToTop&&t.scrollToTop(...e)),["prevent"])),onKeydown:e[6]||(e[6]=(...e)=>t.scrollToTop&&t.scrollToTop(...e)),class:"scrollTop-btn d-block"},null,32)],2),(0,i.Wm)(H)],64)}s(7658);var $=s(358),j=s(5790),M=s(2336),W=s(5820),q=s(8286);const z=s(6455);var J={data(){return{products:{},carts:{},changeProducts:[],favoriteData:[],history:[],productLoading:!0,isLoading:!1,search:!0,cartsNum:0,clickName:"",message:""}},components:{Navbar:$.Z,Footer:j.Z,Loading:M.Z},mixins:[q.Z],methods:{getData(){const t="https://vue3-course-api.hexschool.io/api/dessertsweet/products/all";this.productLoading=!1,this.axios.get(t).then((t=>{this.productLoading=!0,this.products=t.data.products,this.changeProducts=t.data.products})).catch((()=>{const t=z.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:t=>{t.addEventListener("mouseenter",z.stopTimer),t.addEventListener("mouseleave",z.resumeTimer)}});t.fire({icon:"error",title:"連線異常"})}))},addCart(t,e){e.target.childNodes[0].classList.remove("d-none");const s={product_id:t.id,qty:1},i="https://vue3-course-api.hexschool.io/api/dessertsweet/cart";this.isLoading=!0,this.axios.post(i,{data:s}).then((()=>{this.isLoading=!1,e.target.childNodes[0].classList.add("d-none");const t=z.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:t=>{t.addEventListener("mouseenter",z.stopTimer),t.addEventListener("mouseleave",z.resumeTimer)}});t.fire({icon:"success",title:"成功加入購物車"})})).catch((()=>{const t=z.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:t=>{t.addEventListener("mouseenter",z.stopTimer),t.addEventListener("mouseleave",z.resumeTimer)}});t.fire({icon:"error",title:"加入購物車失敗"})})),this.renderCarts(),W.Z.emit("updateCartsNum")},addFav(t){if(this.favoriteData.includes(t.id)){this.favoriteData.splice(this.favoriteData.indexOf(t.id),1);const e=z.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:t=>{t.addEventListener("mouseenter",z.stopTimer),t.addEventListener("mouseleave",z.resumeTimer)}});e.fire({icon:"success",title:"成功移除收藏"})}else{this.favoriteData.push(t.id);const e=z.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:t=>{t.addEventListener("mouseenter",z.stopTimer),t.addEventListener("mouseleave",z.resumeTimer)}});e.fire({icon:"success",title:"成功加入收藏"})}localStorage.setItem("fav",JSON.stringify(this.favoriteData)),W.Z.emit("updateNum")},more(t){const e=`https://vue3-course-api.hexschool.io/api/dessertsweet/product/${t}`;this.axios.get(e).then((()=>{this.$router.push(`/user/product/${t}`)})).catch((()=>{const t=z.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:t=>{t.addEventListener("mouseenter",z.stopTimer),t.addEventListener("mouseleave",z.resumeTimer)}});t.fire({icon:"error",title:"連線異常"})})),this.productHistory(t)},renderCarts(){const t="https://vue3-course-api.hexschool.io/api/dessertsweet/cart";this.axios.get(t).then((t=>{this.carts=t.data.data.carts})).catch((()=>{const t=z.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:t=>{t.addEventListener("mouseenter",z.stopTimer),t.addEventListener("mouseleave",z.resumeTimer)}});t.fire({icon:"error",title:"連線異常"})}))},productHistory(t){this.history.push(t),this.history=localStorage.setItem("setHistory",JSON.stringify(this.history))},updateFav(){this.favoriteData=JSON.parse(localStorage.getItem("fav"))||[]},onChange(t){const{value:e}=t.target;this.clickName=e},searchProducts(){if(""!==this.message){const t=this.message.trim(),e=this.products.filter((e=>e.title.match(t)));this.products=e}else this.products=this.changeProducts}},watch:{cartsNum:{handler(){this.renderCarts()},immediate:!0},message:{handler(){this.searchProducts()},immediate:!0}},computed:{updateProducts(){let t=[];return t=this.products,"價格排序低到高"===this.clickName?t.sort(((t,e)=>t.price-e.price)):"價格排序高到低"===this.clickName?t.sort(((t,e)=>e.price-t.price)):"熱銷商品"===this.clickName&&t.sort(((t,e)=>t.num-e.num)),t}},mounted(){this.getData(),this.updateFav()}},Y=s(3744);const R=(0,Y.Z)(J,[["render",H]]);var V=R}}]);
//# sourceMappingURL=859.6f3fa121.js.map