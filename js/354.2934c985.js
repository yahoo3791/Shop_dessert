"use strict";(self["webpackChunkeshop"]=self["webpackChunkeshop"]||[]).push([[354],{3877:function(e,t,a){a.d(t,{Z:function(){return b}});var l=a(6252),i=a(9963),s=a(3577);const o={"aria-label":"Page navigation example"},d={class:"pagination justify-content-center"},n=(0,l._)("li",{class:"page-item"},[(0,l._)("a",{class:"page-link text-secondary",href:"#","aria-label":"Previous"},[(0,l._)("span",{"aria-hidden":"true"},"«")])],-1),r=["onClick"],c=(0,l._)("li",{class:"page-item"},[(0,l._)("a",{class:"page-link text-secondary",href:"#","aria-label":"Next"},[(0,l._)("span",{"aria-hidden":"true"},"»")])],-1);function m(e,t,a,m,p,u){return(0,l.wg)(),(0,l.iD)("nav",o,[(0,l._)("ul",d,[n,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.pages.total_pages,(e=>((0,l.wg)(),(0,l.iD)("li",{class:"page-item",key:e.id},[(0,l._)("a",{class:"page-link text-secondary",href:"#",onClick:(0,i.iM)((t=>u.updatePage(e)),["prevent"])},(0,s.zw)(e),9,r)])))),128)),c])])}var p={props:["pages"],methods:{updatePage(e){this.$emit("update-page",e)}}},u=a(3744);const h=(0,u.Z)(p,[["render",m]]);var b=h},354:function(e,t,a){a.r(t),a.d(t,{default:function(){return Oe}});var l=a(6252),i=a(3577);const s={class:"container pt-utility",style:{height:"100vh"}},o={class:"row"},d={class:"col-12 px-0 px-md-2"},n={class:"text-end"},r={key:0,class:"col-12"},c=(0,l._)("h2",{class:"text-black text-center",style:{padding:"30vh 0"}}," 尚未新增商品。 ",-1),m=[c],p={key:1,class:"col-12 px-0 px-md-2"},u={class:"table mt-4 text-nowrap",style:{"table-layout":"fixed"}},h=(0,l._)("thead",null,[(0,l._)("tr",{class:"font-medium tracking-wider"},[(0,l._)("th",null,"品名"),(0,l._)("th",{class:"d-none d-md-table-cell"},"分類"),(0,l._)("th",{class:"d-none d-md-table-cell"},"原價"),(0,l._)("th",null,"售價"),(0,l._)("th",null,"上線"),(0,l._)("th",{width:"95"},"編輯")])],-1),b={class:"overflow-hidden",style:{"text-overflow":"ellipsis"}},g={class:"d-none d-md-table-cell"},_={class:"d-none d-md-table-cell"},f={key:0,class:"text-success"},v={key:1,class:"text-success"},w={class:"p-0"},y={class:"btn-group"},x=["onClick"],k=["onClick"],D={key:0,class:"row",style:{"padding-top":"calc(100vh-20vh)"}},U={class:"col-12 position-fixed bottom-0 start-50 translate-middle-x"};function L(e,t,a,c,L,M){const P=(0,l.up)("Loading"),C=(0,l.up)("pagination"),I=(0,l.up)("productModal"),$=(0,l.up)("deleteModal");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",s,[(0,l.Wm)(P,{active:L.isLoading,"onUpdate:active":t[0]||(t[0]=e=>L.isLoading=e)},null,8,["active"]),(0,l._)("div",o,[(0,l._)("div",d,[(0,l._)("div",n,[(0,l._)("button",{onClick:t[1]||(t[1]=e=>M.openModal(!0)),type:"button",class:"btn btn-outline-primary","data-bs-target":"#exampleModal"}," 新增 ")])]),0===L.Data.length?((0,l.wg)(),(0,l.iD)("div",r,m)):((0,l.wg)(),(0,l.iD)("div",p,[(0,l._)("table",u,[h,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(L.Data,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",b,(0,i.zw)(t.title),1),(0,l._)("td",g,(0,i.zw)(t.category),1),(0,l._)("td",_,(0,i.zw)(e.$filters.currency(t.origin_price)),1),(0,l._)("td",null,(0,i.zw)(t.price),1),(0,l._)("td",null,[1===t.is_enabled?((0,l.wg)(),(0,l.iD)("span",f," 啟用 ")):((0,l.wg)(),(0,l.iD)("span",v," 未啟用 "))]),(0,l._)("td",w,[(0,l._)("div",y,[(0,l._)("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:e=>M.openModal(!1,t)}," 編輯 ",8,x),(0,l._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:e=>M.openDeleteModal(t)}," 刪除 ",8,k)])])])))),128))])])]))]),0!==L.Data.length?((0,l.wg)(),(0,l.iD)("div",D,[(0,l._)("div",U,[(0,l.Wm)(C,{pages:L.Pagination,onUpdatePage:M.getData},null,8,["pages","onUpdatePage"])])])):(0,l.kq)("",!0)]),(0,l.Wm)(I,{ref:"productModal",product:L.tempProduct,onAdd:M.UpdateData,"is-new":L.isNew},null,8,["product","onAdd","is-new"]),(0,l.Wm)($,{ref:"deleteModal",delete:L.deleteItem,onDeleteItem:M.deleteProduct},null,8,["delete","onDeleteItem"])],64)}var M=a(7398),P=a.n(M),C=a(9963);const I={class:"container"},$={class:"modal fade",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},V={class:"modal-dialog modal-xl"},B={class:"modal-content"},E={class:"modal-header bg-dark text-white"},T={class:"modal-title",id:"exampleModalLabel"},Z={key:0},N={key:1},z=(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),F={class:"modal-body text-black"},H={class:"row"},O={class:"col-12"},W={class:"mb-3"},j={for:"image",class:"form-label w-100 font-medium tracking-wider"},Y={class:"mb-3"},A={for:"customFile",class:"form-label w-100 font-medium tracking-wider"},K=(0,l._)("i",{class:"fas fa-spinner fa-spin"},null,-1),S={class:"col-12"},q={class:"mb-3"},G={for:"title",class:"form-label w-100 font-medium tracking-wider"},J={class:"row gx-2"},Q={class:"mb-3 col-md-6"},R={for:"category",class:"form-label w-100 font-medium tracking-wider"},X={class:"mb-3 col-md-6"},ee={for:"num",class:"form-label w-100 font-medium tracking-wider"},te={class:"mb-3 col-md-6"},ae={for:"price",class:"form-label w-100 font-medium tracking-wider"},le={class:"row gx-2"},ie={class:"mb-3 col-md-6"},se={for:"origin_price",class:"form-label w-100 font-medium tracking-wider"},oe={class:"mb-3 col-md-6"},de={for:"price",class:"form-label w-100 font-medium tracking-wider"},ne=(0,l._)("hr",null,null,-1),re={class:"mb-3"},ce={for:"description",class:"form-label w-100 font-medium tracking-wider"},me={class:"mb-3"},pe={for:"content",class:"form-label w-100 font-medium tracking-wider"},ue={class:"mb-3"},he={class:"text-end"},be={class:"form-check-label font-medium tracking-wider",for:"is_enabled"},ge={class:"modal-footer"},_e=(0,l._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function fe(e,t,a,i,s,o){const d=(0,l.up)("Loading");return(0,l.wg)(),(0,l.iD)("div",I,[(0,l.Wm)(d,{active:s.isLoading,"onUpdate:active":t[0]||(t[0]=e=>s.isLoading=e)},null,8,["active"]),(0,l._)("div",$,[(0,l._)("div",V,[(0,l._)("div",B,[(0,l._)("div",E,[(0,l._)("h5",T,[!0===a.isNew?((0,l.wg)(),(0,l.iD)("span",Z," 新增產品 ")):((0,l.wg)(),(0,l.iD)("span",N," 編輯產品 "))]),z]),(0,l._)("div",F,[(0,l._)("div",H,[(0,l._)("div",O,[(0,l._)("div",W,[(0,l._)("label",j,[(0,l.Uk)(" 輸入圖片網址 "),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.data.imageUrl=e),type:"text",class:"form-control",id:"image",name:"image",placeholder:"請輸入圖片連結"},null,512),[[C.nr,s.data.imageUrl]])])]),(0,l._)("div",Y,[(0,l._)("label",A,[(0,l.Uk)("或 上傳圖片 "),K,(0,l._)("input",{ref:"fileInput",onChange:t[2]||(t[2]=(...e)=>o.uploadFile&&o.uploadFile(...e)),type:"file",id:"customFile",class:"form-control"},null,544)])])]),(0,l._)("div",S,[(0,l._)("div",q,[(0,l._)("label",G,[(0,l.Uk)("標題 "),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.data.title=e),type:"text",class:"form-control",id:"title",placeholder:"請輸入標題"},null,512),[[C.nr,s.data.title]])])]),(0,l._)("div",J,[(0,l._)("div",Q,[(0,l._)("label",R,[(0,l.Uk)("分類 "),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.data.category=e),type:"text",class:"form-control",id:"category",placeholder:"請輸入分類"},null,512),[[C.nr,s.data.category]])])]),(0,l._)("div",X,[(0,l._)("label",ee,[(0,l.Uk)("數量 "),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.data.num=e),type:"number",class:"form-control",id:"num",placeholder:"請輸入數量"},null,512),[[C.nr,s.data.num]])])]),(0,l._)("div",te,[(0,l._)("label",ae,[(0,l.Uk)("單位 "),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.data.unit=e),type:"text",class:"form-control",id:"unit",placeholder:"請輸入單位"},null,512),[[C.nr,s.data.unit]])])])]),(0,l._)("div",le,[(0,l._)("div",ie,[(0,l._)("label",se,[(0,l.Uk)("原價 "),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>s.data.origin_price=e),type:"number",class:"form-control",id:"origin_price",placeholder:"請輸入原價"},null,512),[[C.nr,s.data.origin_price]])])]),(0,l._)("div",oe,[(0,l._)("label",de,[(0,l.Uk)("售價 "),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>s.data.price=e),type:"number",class:"form-control",id:"price",placeholder:"請輸入售價"},null,512),[[C.nr,s.data.price]])])])]),ne,(0,l._)("div",re,[(0,l._)("label",ce,[(0,l.Uk)("產品描述 "),(0,l.wy)((0,l._)("textarea",{"onUpdate:modelValue":t[9]||(t[9]=e=>s.data.description=e),type:"text",class:"form-control",id:"description",placeholder:"請輸入產品描述"},"\n                    ",512),[[C.nr,s.data.description]])])]),(0,l._)("div",me,[(0,l._)("label",pe,[(0,l.Uk)("說明內容 "),(0,l.wy)((0,l._)("textarea",{"onUpdate:modelValue":t[10]||(t[10]=e=>s.data.content=e),type:"text",class:"form-control",id:"content",placeholder:"請輸入產品說明內容"},"\n                    ",512),[[C.nr,s.data.content]])])]),(0,l._)("div",ue,[(0,l._)("div",he,[(0,l._)("label",be,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>s.data.is_enabled=e),class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,id:"is_enabled",name:"is_enabled"},null,512),[[C.e8,s.data.is_enabled]]),(0,l.Uk)(" 是否啟用 ")])])])])])]),(0,l._)("div",ge,[_e,(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:t[12]||(t[12]=(...e)=>o.add&&o.add(...e))}," 確認 ")])])])],512)])}var ve=a(1339);const we=a(6455);var ye={props:{product:{type:Object,default(){return{}}},isNew:null},watch:{product(){this.data=this.product}},components:{Loading:P()},data(){return{modal:{},data:{},isLoading:!1}},methods:{add(){this.$emit("add",this.data)},uploadFile(){const e=this.$refs.fileInput.files[0],t=new FormData;t.append("file-to-upload",e);const a="https://vue3-course-api.hexschool.io/api/dessertsweet/admin/upload";this.isLoading=!0,this.axios.post(a,t).then((e=>{this.isLoading=!1,this.data.imageUrl=e.data.imageUrl})).catch((()=>{const e=we.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",we.stopTimer),e.addEventListener("mouseleave",we.resumeTimer)}});e.fire({icon:"error",title:"連線異常"})}))}},mixins:[ve.Z]},xe=a(3744);const ke=(0,xe.Z)(ye,[["render",fe]]);var De=ke;const Ue={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},Le={class:"modal-dialog"},Me={class:"modal-content text-black"},Pe=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title text-danger",id:"exampleModalLabel"},"刪除警告"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ce={class:"modal-body"},Ie={class:"text-red"},$e={class:"modal-footer"},Ve=(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消 ",-1);function Be(e,t,a,s,o,d){return(0,l.wg)(),(0,l.iD)("div",Ue,[(0,l._)("div",Le,[(0,l._)("div",Me,[Pe,(0,l._)("div",Ce,[(0,l.Uk)(" 確定要刪除"),(0,l._)("span",Ie,(0,i.zw)(this.delete.title),1)]),(0,l._)("div",$e,[Ve,(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...e)=>d.deleteItem&&d.deleteItem(...e))},"確定刪除 ")])])])],512)}var Ee={data(){return{modal:{}}},props:["delete"],methods:{deleteItem(){this.$emit("deleteItem")}},mixins:[ve.Z]};const Te=(0,xe.Z)(Ee,[["render",Be]]);var Ze=Te,Ne=a(3877);const ze=a(6455);var Fe={data(){return{Data:{},tempProduct:{},deleteItem:{},Pagination:{},isLoading:!1,isNew:!1}},components:{productModal:De,deleteModal:Ze,Loading:P(),pagination:Ne.Z},inject:["emitter"],methods:{getData(e=1){const t=`https://vue3-course-api.hexschool.io/api/dessertsweet/admin/products?page=${e}`;this.isLoading=!0,this.axios.get(t).then((e=>{this.isLoading=!1,this.Data=e.data.products,this.Pagination=e.data.pagination})).catch((()=>{const e=ze.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ze.stopTimer),e.addEventListener("mouseleave",ze.resumeTimer)}});e.fire({icon:"error",title:"連線異常"})}))},UpdateData(e){this.tempProduct=e;let t="https://vue3-course-api.hexschool.io/api/dessertsweet/admin/product",a="post";this.isNew||(t=`https://vue3-course-api.hexschool.io/api/dessertsweet/admin/product/${e.id}`,a="put"),this.isLoading=!0,this.axios[a](t,{data:this.tempProduct}).then((()=>{this.isLoading=!1,this.$refs.productModal.modalHide(),this.tempProduct={},this.getData(),this.emitter.emit("push-message",{style:"success",title:"更新成功"})})).catch((()=>{const e=ze.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ze.stopTimer),e.addEventListener("mouseleave",ze.resumeTimer)}});e.fire({icon:"error",title:"連線異常"})}))},openModal(e,t){this.tempProduct=e?{}:{...t},this.$refs.productModal.modalShow(),this.isNew=e},openDeleteModal(e){this.$refs.deleteModal.modalShow(),this.deleteItem=e},deleteProduct(){this.isLoading=!0;const e=`https://vue3-course-api.hexschool.io/api/dessertsweet/admin/product/${this.deleteItem.id}`;this.axios.delete(e).then((()=>{this.$refs.deleteModal.modalHide(),this.isLoading=!1,this.getData(),this.emitter.emit("push-message",{style:"success",title:"刪除成功"})})).catch((()=>{const e=ze.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ze.stopTimer),e.addEventListener("mouseleave",ze.resumeTimer)}});e.fire({icon:"error",title:"連線異常"})}))}},created(){this.getData()}};const He=(0,xe.Z)(Fe,[["render",L]]);var Oe=He}}]);
//# sourceMappingURL=354.2934c985.js.map