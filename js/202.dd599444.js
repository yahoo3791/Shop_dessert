"use strict";(self["webpackChunkeshop"]=self["webpackChunkeshop"]||[]).push([[202],{9202:function(e,t,s){s.r(t),s.d(t,{default:function(){return oe}});var o=s(6252),a=s(9963),i=s(3577);const l={class:"pt-5 auto-height"},r={class:"container pt-utility auto-height-content"},n=(0,o._)("div",{class:"row pb-5"},[(0,o._)("div",{class:"col-12 d-flex justify-content-around pb-2"},[(0,o._)("div",{class:"p-01"}," 1.確認商品並填寫資料 "),(0,o._)("div",{class:"p-01"}," 2.完成訂單 ")]),(0,o._)("div",{class:"col-12"},[(0,o._)("div",{class:"progress"},[(0,o._)("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:{width:"50%"}})])])],-1),d={class:"row text-white flex-column-reverse flex-md-row"},c={class:"col-12 col-md-6"},m=(0,o._)("div",{class:"d-flex justify-content-between align-items-center pb-3 mb-3 border-bottom-404040"},[(0,o._)("h1",{class:"mb-0 tracking-widest font-bold text-3xl"},"訂購人資訊")],-1),u={class:"py-3 position-relative"},p=(0,o._)("h3",{class:"d-block formData-label tracking-wide text-lg"},"*聯絡人姓名",-1),b={class:"py-3 position-relative"},h=(0,o._)("h3",{class:"tracking-wide text-lg"},"*性別",-1),f={class:"form-check"},x={class:"form-check-label",for:"male"},g={class:"form-check"},v={class:"form-check-label",for:"female"},w={class:"py-3 position-relative"},_=(0,o._)("h3",{class:"d-block formData-label tracking-widest text-lg"}," *聯絡人信箱 ",-1),k={class:"py-3 position-relative"},y=(0,o._)("h3",{class:"d-block formData-label tracking-widest text-lg"}," *聯絡人手機 ",-1),D={class:"py-3 position-relative"},V=(0,o._)("h3",{class:"d-block formData-label tracking-widest text-lg"}," *收件人地址 ",-1),C={class:"py-3 position-relative"},U={ref:"formMessage",class:"d-block formData-label tracking-wide text-lg",for:"adress"},E=(0,o._)("span",{class:"text-lg tracking-wide opacity-75"},null,-1),B=(0,o._)("div",{class:"py-3 position-relative"},[(0,o._)("label",{for:"payment",class:"d-block text-lg"},[(0,o.Uk)("*付款方式 "),(0,o._)("select",{name:"payment",id:"payment",class:"bg-white text-black w-100 border-0 border-bottom p-2 text-center text-lg",style:{"text-align-last":"center"}},[(0,o._)("option",{value:"信用卡",name:"payment"}," 信用卡 "),(0,o._)("option",{value:"超商取貨付款",name:"payment"}," 超商取貨付款 ")])])],-1),L={class:"text-end mb-5 mt-3 d-block d-md-none"},T={class:"form-check text-end"},W={class:"form-check-label text-white text-xl ms-auto",for:"check"},$={class:"col-12 col-md-5 offset-md-1"},z=(0,o._)("h4",{class:"tracking-widest font-bold text-3xl pb-3 border-bottom-404040"}," 商品資訊 ",-1),O=["src"],P={class:"text-2xl d-flex flex-column justify-content-between ps-3"},j={class:"tracking-wide font-semibold"},q={class:"leading-7 tracking-wider text-lg"},F={class:"leading-7 tracking-wider text-lg"},M={class:"leading-7 d-block tracking-wider text-xl"},Z={class:"text-white text-end tracking-widest font-semibold text-xl"},G={class:"col-12 pt-2 pb-3 text-red text-end tracking-widest font-semibold text-base"},H={class:"input-group mb-5 input-group-sm ms-auto w-100"},I={for:"coupon",class:"d-block form-control rounded-0"},N={class:"input-group-append"},S=["disabled"],Y={class:"text-end mb-5 d-none d-md-block"},K={class:"form-check text-end"},A={class:"form-check-label text-white text-xl ms-auto",for:"check"};function J(e,t,s,J,Q,R){const X=(0,o.up)("Navbar"),ee=(0,o.up)("VField"),te=(0,o.up)("ErrorMessage"),se=(0,o.up)("VForm"),oe=(0,o.up)("Footer");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(X),(0,o._)("div",l,[(0,o._)("div",r,[n,(0,o._)("div",d,[(0,o._)("div",c,[m,(0,o.Wm)(se,{onSubmit:R.submitContact},{default:(0,o.w5)((()=>[(0,o._)("div",u,[p,(0,o.Wm)(ee,{id:"name",modelValue:Q.formData.user.name,"onUpdate:modelValue":t[0]||(t[0]=e=>Q.formData.user.name=e),name:"姓名",rules:"required",type:"text",class:"carts-input w-100 p-2 border-0 border-bottom text-white",placeholder:"請輸入姓名"},null,8,["modelValue"]),(0,o.Wm)(te,{class:"ps-2 position-absolute text-xs text-orange d-block",name:"姓名"})]),(0,o._)("div",b,[h,(0,o._)("div",f,[(0,o._)("label",x,[(0,o.wy)((0,o._)("input",{class:"form-check-input",type:"radio",name:"gendor","onUpdate:modelValue":t[1]||(t[1]=e=>Q.gendor=e),id:"male",value:"male",checked:""},null,512),[[a.G2,Q.gendor]]),(0,o.Uk)(" 男 ")])]),(0,o._)("div",g,[(0,o._)("label",v,[(0,o.wy)((0,o._)("input",{class:"form-check-input",type:"radio",name:"gendor","onUpdate:modelValue":t[2]||(t[2]=e=>Q.gendor=e),id:"female",value:"female"},null,512),[[a.G2,Q.gendor]]),(0,o.Uk)(" 女 ")])])]),(0,o._)("div",w,[_,(0,o.Wm)(ee,{id:"email",modelValue:Q.formData.user.email,"onUpdate:modelValue":t[3]||(t[3]=e=>Q.formData.user.email=e),name:"信箱",rules:"required|email",type:"email",class:"carts-input w-100 p-2 border-0 border-bottom text-white",placeholder:"請輸入電子信箱"},null,8,["modelValue"]),(0,o.Wm)(te,{class:"ps-2 position-absolute text-xs text-orange d-block",name:"信箱"})]),(0,o._)("div",k,[y,(0,o.Wm)(ee,{id:"phone",modelValue:Q.formData.user.tel,"onUpdate:modelValue":t[4]||(t[4]=e=>Q.formData.user.tel=e),name:"手機",rules:"required",type:"tel",class:"carts-input w-100 p-2 border-0 border-bottom text-white d-block",placeholder:"請輸入手機號碼"},null,8,["modelValue"]),(0,o.Wm)(te,{class:"ps-2 position-absolute text-xs text-orange",name:"手機"})]),(0,o._)("div",D,[V,(0,o.Wm)(ee,{id:"address",modelValue:Q.formData.user.address,"onUpdate:modelValue":t[5]||(t[5]=e=>Q.formData.user.address=e),name:"地址",rules:"required",type:"address",class:"carts-input w-100 p-2 border-0 border-bottom text-white d-block",placeholder:"請輸入完整地址"},null,8,["modelValue"]),(0,o.Wm)(te,{class:"ps-2 position-absolute text-xs text-orange",name:"地址"})]),(0,o._)("div",C,[(0,o._)("label",U,[(0,o.Uk)("備註 "),E,(0,o.wy)((0,o._)("input",{id:"message","onUpdate:modelValue":t[6]||(t[6]=e=>Q.formData.message=e),name:"留言",class:"carts-input w-100 p-2 border-0 border-bottom text-white",maxlength:"100",placeholder:"留下疑問或需求"},null,512),[[a.nr,Q.formData.message]])],512)]),B,(0,o._)("div",L,[(0,o._)("div",T,[(0,o._)("label",W,[(0,o.wy)((0,o._)("input",{class:"form-check-input",type:"checkbox",id:"check","onUpdate:modelValue":t[7]||(t[7]=e=>Q.selection=e)},null,512),[[a.e8,Q.selection]]),(0,o.Uk)(" 我已確認商品資訊 ")])]),(0,o._)("button",{type:"submitContact",class:(0,i.C_)(["btn btn-light fw-bold ms-2",{"not-allowed":!Q.selection}])},"付款 ",2)])])),_:1},8,["onSubmit"])]),(0,o._)("div",$,[z,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Q.cartsData.carts,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"payCart-item border-bottom d-flex py-3",key:e.id},[(0,o._)("img",{src:e.product.imageUrl,class:"d-block",alt:"cartImage"},null,8,O),(0,o._)("div",P,[(0,o._)("p",j,(0,i.zw)(e.product.title)+" ("+(0,i.zw)(e.product.unit)+") ",1),(0,o._)("p",q,"單價"+(0,i.zw)(e.product.price)+"$",1),(0,o._)("p",F,"數量"+(0,i.zw)(e.qty),1),(0,o._)("p",M,"金額"+(0,i.zw)(e.total)+"$",1)])])))),128)),(0,o._)("div",Z,[(0,o._)("div",{class:(0,i.C_)({"d-none":Q.coupon})}," 總金額"+(0,i.zw)(Q.cartsData.total)+"$ ",3),(0,o._)("div",null,[(0,o._)("del",{class:(0,i.C_)({"d-none":!Q.coupon}),style:{"text-decoration-color":"red"}}," 總金額"+(0,i.zw)(Q.cartsData.total)+"$ ",3)]),(0,o._)("div",G,[(0,o._)("p",{class:(0,i.C_)({"d-none":!Q.coupon})}," 折扣價"+(0,i.zw)(Math.round(e.$filters.currency(Q.cartsData.final_total)))+"$ ",3)])]),(0,o._)("div",H,[(0,o._)("label",I,[(0,o.wy)((0,o._)("input",{id:"coupon",name:"coupon",type:"text",ref:"codeValue","onUpdate:modelValue":t[8]||(t[8]=e=>Q.codeValue=e),class:"tracking-widest border-0 w-100",placeholder:"請輸入優惠碼"},null,512),[[a.nr,Q.codeValue]])]),(0,o._)("div",N,[(0,o._)("button",{onClick:t[9]||(t[9]=(...e)=>R.useCoupon&&R.useCoupon(...e)),class:"btn btn-outline-secondary tracking-widest rounded-0",type:"button",disabled:""===Q.codeValue}," 套用優惠碼 ",8,S)])]),(0,o._)("div",Y,[(0,o._)("div",K,[(0,o._)("label",A,[(0,o.wy)((0,o._)("input",{class:"form-check-input",type:"checkbox",id:"check","onUpdate:modelValue":t[10]||(t[10]=e=>Q.selection=e)},null,512),[[a.e8,Q.selection]]),(0,o.Uk)(" 我已確認商品資訊 ")])]),(0,o._)("button",{type:"button",onClick:t[11]||(t[11]=(...e)=>R.submitContact&&R.submitContact(...e)),class:(0,i.C_)(["btn btn-light fw-bold ms-2",{"not-allowed":!Q.selection}])},"付款 ",2)])])])])]),(0,o.Wm)(oe)],64)}s(7658);var Q=s(358),R=s(5790);const X=s(6455);var ee={data(){return{cartsData:{},selection:!1,coupon:!1,formData:{user:{name:"",email:"",tel:"",address:""},message:""},codeValue:"",gendor:""}},components:{Navbar:Q.Z,Footer:R.Z},methods:{getData(){const e="https://vue3-course-api.hexschool.io/api/dessertsweet/cart";this.axios.get(e).then((e=>{this.cartsData=e.data.data})).catch((()=>{const e=X.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",X.stopTimer),e.addEventListener("mouseleave",X.resumeTimer)}});e.fire({icon:"error",title:"連線異常"})}))},useCoupon(){const e={code:this.codeValue},t="https://vue3-course-api.hexschool.io/api/dessertsweet/coupon";this.axios.post(t,{data:e}).then((()=>{this.getData(),this.coupon=!0,this.$refs.codeValue.disabled=!0;const e=X.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",X.stopTimer),e.addEventListener("mouseleave",X.resumeTimer)}});e.fire({icon:"success",title:"使用優惠卷成功"})})).catch((()=>{const e=X.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",X.stopTimer),e.addEventListener("mouseleave",X.resumeTimer)}});e.fire({icon:"error",title:"連線異常"})}))},submitContact(){if(""===this.formData.user.name||""===this.formData.user.email||""===this.formData.user.tel||""===this.formData.user.address){const e=X.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",X.stopTimer),e.addEventListener("mouseleave",X.resumeTimer)}});e.fire({icon:"info",title:"資料未完整填寫"})}else if(""!==this.gendor){const e=X.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",X.stopTimer),e.addEventListener("mouseleave",X.resumeTimer)}});e.fire({icon:"info",title:'請填寫性別欄位 <i class="bi bi-emoji-smile-fill"></i>'})}else if(!1===this.selection){const e=X.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",X.stopTimer),e.addEventListener("mouseleave",X.resumeTimer)}});e.fire({icon:"info",title:'確認資訊完成後<br>記得勾選確認欄位 <i class="bi bi-emoji-smile-fill"></i>'})}else{const e="https://vue3-course-api.hexschool.io/api/dessertsweet/order";this.axios.post(e,{data:this.formData}).then((e=>{const{orderId:t}=e.data;this.$router.push(`/user/checkout/${t}`)})).catch((()=>{const e=X.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",X.stopTimer),e.addEventListener("mouseleave",X.resumeTimer)}});e.fire({icon:"error",title:"連線異常"})}))}}},mounted(){this.getData()}},te=s(3744);const se=(0,te.Z)(ee,[["render",J]]);var oe=se}}]);
//# sourceMappingURL=202.dd599444.js.map