"use strict";(self["webpackChunkeshop"]=self["webpackChunkeshop"]||[]).push([[211],{3877:function(e,t,a){a.d(t,{Z:function(){return g}});var l=a(6252),d=a(9963),s=a(3577);const i={"aria-label":"Page navigation example"},n={class:"pagination justify-content-center"},o=(0,l._)("li",{class:"page-item"},[(0,l._)("a",{class:"page-link text-secondary",href:"#","aria-label":"Previous"},[(0,l._)("span",{"aria-hidden":"true"},"«")])],-1),r=["onClick"],c=(0,l._)("li",{class:"page-item"},[(0,l._)("a",{class:"page-link text-secondary",href:"#","aria-label":"Next"},[(0,l._)("span",{"aria-hidden":"true"},"»")])],-1);function u(e,t,a,u,m,p){return(0,l.wg)(),(0,l.iD)("nav",i,[(0,l._)("ul",n,[o,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.pages.total_pages,(e=>((0,l.wg)(),(0,l.iD)("li",{class:"page-item",key:e.id},[(0,l._)("a",{class:"page-link text-secondary",href:"#",onClick:(0,d.iM)((t=>p.updatePage(e)),["prevent"])},(0,s.zw)(e),9,r)])))),128)),c])])}var m={props:["pages"],methods:{updatePage(e){this.$emit("update-page",e)}}},p=a(3744);const h=(0,p.Z)(m,[["render",u]]);var g=h},6211:function(e,t,a){a.r(t),a.d(t,{default:function(){return De}});var l=a(6252),d=a(3577);const s={key:0,class:"container-fluid text-center text-black",style:{padding:"40vh 0",height:"100vh"}},i=(0,l._)("h2",null,"尚未有訂單。",-1),n=[i],o={key:1,class:"container-fluid pt-utility",style:{height:"100vh"}},r={class:"text-end"},c={class:"table mt-4",style:{"table-layout":"fixed"}},u=(0,l._)("thead",null,[(0,l._)("tr",{class:"font-medium tracking-wider"},[(0,l._)("th",{class:"d-none d-md-table-cell"},"購買時間"),(0,l._)("th",null,"Email"),(0,l._)("th",null,"購買款項"),(0,l._)("th",{class:"d-none d-md-table-cell"},"應付金額"),(0,l._)("th",{class:"d-none d-md-table-cell"},"是否付款"),(0,l._)("th",null,"編輯")])],-1),m={class:"align-middle d-none d-md-table-cell"},p={class:"align-middle overflow-hidden",width:"30",style:{"text-overflow":"ellipsis"}},h={class:"align-middle overflow-auto"},g={class:"list-unstyled"},b=(0,l._)("br",null,null,-1),_={class:"d-none d-md-table-cell align-middle"},v={class:"d-none d-md-table-cell align-middle"},w={key:0},D={key:1},f={class:"align-middle"},y={class:"btn-group"},k=["onClick"],x=["onClick"];function M(e,t,a,i,M,z){const C=(0,l.up)("Loading"),L=(0,l.up)("Pagination"),A=(0,l.up)("orderModal"),$=(0,l.up)("deleteModal"),P=(0,l.up)("deleteOrderAllModal");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(C,{active:M.isLoading,"onUpdate:active":t[0]||(t[0]=e=>M.isLoading=e)},null,8,["active"]),0===M.data.length?((0,l.wg)(),(0,l.iD)("div",s,n)):((0,l.wg)(),(0,l.iD)("div",o,[(0,l._)("div",r,[(0,l._)("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=(...e)=>z.deleteAllModal&&z.deleteAllModal(...e))}," 刪除全部訂單 ")]),(0,l._)("table",c,[u,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(M.data,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",m,(0,d.zw)(e.$filters.date(t.create_at)),1),(0,l._)("td",p,(0,d.zw)(t.user.email),1),(0,l._)("td",h,[(0,l._)("ul",g,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.products,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id},[(0,l.Uk)((0,d.zw)(e.product.title),1),b,(0,l.Uk)(" "+(0,d.zw)(e.qty)+" "+(0,d.zw)(e.product.unit),1)])))),128))])]),(0,l._)("td",_,(0,d.zw)(t.total),1),(0,l._)("td",v,[t.is_paid?((0,l.wg)(),(0,l.iD)("span",w," 已付款 ")):((0,l.wg)(),(0,l.iD)("span",D," 未付款 "))]),(0,l._)("td",f,[(0,l._)("div",y,[(0,l._)("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:e=>z.ChangeModal(t)}," 檢視 ",8,k),(0,l._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:e=>z.DeleteModal(t)}," 刪除 ",8,x)])])])))),128))])]),(0,l.Wm)(L,{class:"position-fixed bottom-0 start-50 translate-middle-x",pages:M.pagination,onUpdatePage:z.getData},null,8,["pages","onUpdatePage"])])),(0,l.Wm)(A,{ref:"orderModal","change-data":M.changeData},null,8,["change-data"]),(0,l.Wm)($,{ref:"deleteModal","delete-data":M.deleteData,onDeleteItem:z.deleteItem},null,8,["delete-data","onDeleteItem"]),(0,l.Wm)(P,{ref:"deleteOrderAllModal",onDeleteAll:z.deleteAll},null,8,["onDeleteAll"])],64)}const z={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",ref:"modal"},C={class:"modal-dialog"},L={class:"modal-content text-black"},A=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title",id:"staticBackdropLabel"},"檢視訂單 "),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),$={class:"modal-body"},P={class:"container"},H={class:"row"},Z={class:"col-12"},B={class:"col-12"},E=(0,l._)("h5",null,"購買商品資訊",-1),O={class:"col-12"},Y=(0,l._)("h5",null,"客戶資料",-1),K=(0,l._)("div",{class:"modal-footer"},[(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉 ")],-1);function U(e,t,a,s,i,n){return(0,l.wg)(),(0,l.iD)("div",z,[(0,l._)("div",C,[(0,l._)("div",L,[A,(0,l._)("div",$,[(0,l._)("div",P,[(0,l._)("div",H,[(0,l._)("div",Z,[(0,l._)("div",null,[(0,l._)("p",null,"訂單時間:"+(0,d.zw)(a.changeData.create_at),1),(0,l._)("p",null,"訂單編號:"+(0,d.zw)(a.changeData.id),1)])]),(0,l._)("div",B,[E,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.changeData.products,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id},[(0,l._)("p",null,"書名:"+(0,d.zw)(e.product.title),1),(0,l._)("p",null,"數量:"+(0,d.zw)(e.qty)+"/"+(0,d.zw)(e.product.unit),1)])))),128)),(0,l.Uk)(" 應付金額:"+(0,d.zw)(a.changeData.total)+"$ ",1)]),(0,l._)("div",O,[Y,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.changeData.user,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id},(0,d.zw)(e),1)))),128)),(0,l._)("p",null," 留言: "+(0,d.zw)(a.changeData.message),1)])])])]),K])])],512)}var T=a(1339),I={data(){return{modal:{}}},props:["changeData"],mixins:[T.Z]},W=a(3744);const q=(0,W.Z)(I,[["render",U]]);var S=q,j=a(3877);const N={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},F={class:"modal-dialog"},G={class:"modal-content"},J=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title text-danger",id:"exampleModalLabel"},"刪除警告 "),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Q={class:"modal-body text-black"},R=(0,l._)("h5",null,"購買款項",-1),V=(0,l._)("h5",null,"顧客資訊",-1),X={class:"modal-footer"},ee=(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉 ",-1);function te(e,t,a,s,i,n){return(0,l.wg)(),(0,l.iD)("div",N,[(0,l._)("div",F,[(0,l._)("div",G,[J,(0,l._)("div",Q,[(0,l._)("p",null,"購買時間:"+(0,d.zw)(a.deleteData.create_at),1),(0,l._)("p",null,"訂單編號:"+(0,d.zw)(a.deleteData.id),1),R,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.deleteData.products,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id},[(0,l._)("p",null,(0,d.zw)(e.product.title),1),(0,l._)("p",null,(0,d.zw)(e.qty)+" / "+(0,d.zw)(e.product.unit),1)])))),128)),(0,l.Uk)(" "+(0,d.zw)(a.deleteData.total)+"$ ",1),V,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.deleteData.user,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id},(0,d.zw)(e),1)))),128))]),(0,l._)("div",X,[ee,(0,l._)("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=(...e)=>n.checkDelete&&n.checkDelete(...e))},"確認刪除 ")])])])],512)}var ae={methods:{checkDelete(){this.$emit("deleteItem")}},props:["deleteData"],mixins:[T.Z]};const le=(0,W.Z)(ae,[["render",te]]);var de=le;const se={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},ie={class:"modal-dialog"},ne={class:"modal-content text-black"},oe=(0,l.uE)('<div class="modal-header"><h5 class="modal-title text-danger" id="exampleModalLabel">刪除警告</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"> 確定要刪除全部訂單嗎 <span class="text-red">(刪除後無法恢復)</span></div>',2),re={class:"modal-footer"},ce=(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉 ",-1);function ue(e,t,a,d,s,i){return(0,l.wg)(),(0,l.iD)("div",se,[(0,l._)("div",ie,[(0,l._)("div",ne,[oe,(0,l._)("div",re,[ce,(0,l._)("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=(...e)=>i.deleteAll&&i.deleteAll(...e))},"刪除 ")])])])],512)}var me={data(){return{modal:{}}},methods:{deleteAll(){this.$emit("deleteAll")}},mixins:[T.Z]};const pe=(0,W.Z)(me,[["render",ue]]);var he=pe,ge=a(7398),be=a.n(ge);const _e=a(6455);var ve={data(){return{data:{},deleteData:{},changeData:{},pagination:{},isLoading:!1}},components:{Loading:be(),orderModal:S,Pagination:j.Z,deleteModal:de,deleteOrderAllModal:he},methods:{getData(e=1){const t=`https://vue3-course-api.hexschool.io/api/dessertsweet/admin/orders?page=${e}`;this.axios.get(t).then((e=>{this.data=e.data.orders,this.pagination=e.data.pagination})).catch((()=>{const e=_e.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",_e.stopTimer),e.addEventListener("mouseleave",_e.resumeTimer)}});e.fire({icon:"error",title:"連線異常"})}))},deleteAllModal(){this.$refs.deleteOrderAllModal.modalShow()},ChangeModal(e){this.changeData=e,this.$refs.orderModal.modalShow()},DeleteModal(e){this.deleteData=e,this.$refs.deleteModal.modalShow()},deleteItem(){const{id:e}=this.deleteData,t=`https://vue3-course-api.hexschool.io/api/dessertsweet/admin/order/${e}`;this.axios.delete(t).then((()=>{this.$refs.deleteModal.modalHide(),this.getData()})).catch((()=>{const e=_e.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",_e.stopTimer),e.addEventListener("mouseleave",_e.resumeTimer)}});e.fire({icon:"error",title:"連線異常"})}))},deleteAll(){const e="https://vue3-course-api.hexschool.io/api/dessertsweet/admin/orders/all";this.axios.delete(e).then((()=>{this.$refs.deleteOrderAllModal.modalHide(),this.getData()})).catch((()=>{const e=_e.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",_e.stopTimer),e.addEventListener("mouseleave",_e.resumeTimer)}});e.fire({icon:"error",title:"連線異常"})}))}},created(){this.getData()}};const we=(0,W.Z)(ve,[["render",M]]);var De=we}}]);
//# sourceMappingURL=211.ead8d0f0.js.map