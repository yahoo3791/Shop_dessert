"use strict";(self["webpackChunkeshop"]=self["webpackChunkeshop"]||[]).push([[706],{2706:function(t,e,i){i.r(e),i.d(e,{default:function(){return A}});var s=i(6252),o=i(3577),a=i(9963);const n={class:"bg-dark auto-height"},r={class:"container pt-utility auto-height-content"},d={class:"row"},c={"aria-label":"breadcrumb"},l={class:"breadcrumb py-2 px-1 p-md-2 breadcrumb-style tracking-wider"},u={class:"breadcrumb-item"},p=(0,s._)("li",{class:"breadcrumb-item breadcrumb-item-none"},"我的收藏 ",-1),m=(0,s._)("h1",{class:"title-01"}," 目前無收藏商品 ",-1),v=(0,s._)("button",{type:"button",class:"btn btn-light fw-bold mt-5"},"前往商城 ",-1),h=(0,s._)("div",{class:"spinner-border text-light spinner-border-3rem",role:"status"},[(0,s._)("span",{class:"visually-hidden"},"Loading...")],-1),g=[h],b={class:"d-flex flex-column-reverse flex-md-row"},f={class:"row d-flex flex-wrap align-items-center"},w=["onClick","onKeydown"],_={key:0,class:"badge bg-danger position-absolute badge-position"},x={key:1,class:"badge bg-dark opacity-50 position-absolute badge-position"},k={class:"product-item position-relative"},D=["src"],y=(0,s._)("div",{class:"w-100 productNotes-container position-absolute bottom-0 start-50"},[(0,s._)("i",{class:"productNotes-icon d-block bi bi-info-square text-4xl position-relative top-50 start-50 text-center"})],-1),C=["onClick","onKeydown"],L={class:"product-content pt-1"},N={class:"product-content-h5 text-base font-medium tracking-wide"},T={class:"d-flex justify-content-between"},F={class:"product-p"},O=["onClick","onKeydown","disabled"],B={key:1,class:"w-btn-product mt-2 opacity-50"},E={class:"px-0 px-md-0 d-flex flex-wrap justify-content-end justify-content-md-center align-items-center mt-3"},K={for:"sort",class:"text-white ps-2 pb-md-2 d-inline-block"},P={class:"bg-white tracking-wide font-medium d-inline-block",style:{"max-width":"300px","border-radius":"5px"}},U=(0,s._)("option",{selected:"selected",disabled:"disabled",class:"d-n",value:""},"選擇顯示方法 ",-1),Z=(0,s._)("option",{value:"熱銷商品"}," 熱銷商品 ",-1),S=(0,s._)("option",{value:"價格排序低到高"}," 價格排序低到高 ",-1),W=(0,s._)("option",{value:"價格排序高到低"}," 價格排序高到低 ",-1),$=[U,Z,S,W];function q(t,e,i,h,U,Z){const S=(0,s.up)("Navbar"),W=(0,s.up)("Loading"),q=(0,s.up)("RouterLink"),j=(0,s.up)("Footer");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(S),(0,s.Wm)(W,{active:U.isLoading,"onUpdate:active":e[0]||(e[0]=t=>U.isLoading=t)},null,8,["active"]),(0,s._)("div",n,[(0,s._)("div",r,[(0,s._)("div",d,[(0,s._)("div",{class:(0,o.C_)(["col-12",{"d-none":0==U.favoriteData.length}])},[(0,s._)("nav",c,[(0,s._)("ol",l,[(0,s._)("li",u,[(0,s.Wm)(q,{to:"/",class:"text-white text-decoration-none"},{default:(0,s.w5)((()=>[(0,s.Uk)(" 首頁 ")])),_:1})]),p])])],2),(0,s._)("div",{class:(0,o.C_)(["col-12 d-n text-center",{"d-block":0==U.favoriteData.length}]),style:{padding:"20vh 0"}},[m,(0,s.Wm)(q,{to:"/user/products",class:"text-decoration-none"},{default:(0,s.w5)((()=>[v])),_:1})],2),0!==U.favoriteData.length?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,o.C_)(["col-12 text-center pt-5",{"d-none":U.productLoading}])},g,2)):(0,s.kq)("",!0),(0,s._)("div",b,[(0,s._)("div",{class:(0,o.C_)(["col-12 col-md-9 text-white mt-3",{"d-none":0==U.favoriteData.length}])},[(0,s._)("div",f,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Z.updateProducts,(i=>((0,s.wg)(),(0,s.iD)("div",{class:"col-6 col-md-6 col-lg-4 mb-5",key:i.id},[(0,s._)("div",{class:"text-white product-content-container mx-auto cursor-pointer position-relative",onClick:t=>Z.more(i.id),onKeydown:t=>Z.more(i.id)},[i.num<=5&&i.num>=1?((0,s.wg)(),(0,s.iD)("span",_,"HOT ")):0===i.num?((0,s.wg)(),(0,s.iD)("span",x,"SOLD OUT ")):(0,s.kq)("",!0),(0,s._)("div",k,[(0,s._)("img",{src:i.imageUrl,class:"position-relative w-100 h-100 product-img",alt:"商品圖片"},null,8,D),y,(0,s._)("div",{onClick:(0,a.iM)((e=>Z.addFav(i,t.index)),["stop"]),onKeydown:e=>Z.addFav(i,t.index),class:"fav position-absolute end-0 top-0"},[(0,s._)("i",{class:(0,o.C_)(["bi fs-1 mx-2",U.favoriteData.includes(i.id)?"bi-heart-fill":"bi-heart"])},null,2)],40,C)]),(0,s._)("div",L,[(0,s._)("h5",N,(0,o.zw)(i.title),1),(0,s._)("div",T,[(0,s._)("p",null,[(0,s._)("del",null,"$"+(0,o.zw)(i.origin_price),1),(0,s.Uk)("/ "),(0,s._)("span",F,"優惠價$"+(0,o.zw)(i.price),1)])]),i.num>=1?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,o.C_)([{"opacity-75":!0===U.isLoading},"w-btn-product mt-2"]),onClick:(0,a.iM)((t=>Z.addCart(i,t)),["stop"]),onKeydown:t=>Z.addCart(i,t),disabled:!0===U.isLoading},[(0,s._)("div",{onClick:e[1]||(e[1]=(0,a.iM)((()=>{}),["stop"])),class:"d-none spinner-border spinner-border-sm",role:"status"}),(0,s.Uk)(" 加入購物車 ")],42,O)):((0,s.wg)(),(0,s.iD)("div",B," 已售完 "))])],40,w)])))),128))])],2),(0,s._)("div",{class:(0,o.C_)(["col-12 col-md-3",{"d-none":U.favoriteData.length<=1}])},[(0,s._)("div",E,[(0,s._)("label",K,[(0,s.Uk)("顯示方法 "),(0,s._)("div",P,[(0,s._)("select",{name:"sort",id:"sort",class:"text-black tracking-wide font-medium px-4 py-1 border-0",onChange:e[2]||(e[2]=t=>Z.onChange(t))},$,32)])])])],2)])])])]),(0,s.Wm)(j)],64)}i(7658);var j=i(358),z=i(5790),H=i(2336),M=i(5820);const I=i(6455);var J={data(){return{favoriteData:[],products:[],filterData:[],isLoading:!1,productLoading:!0,clickName:""}},components:{Navbar:j.Z,Footer:z.Z,Loading:H.Z},methods:{getData(){const t="https://vue3-course-api.hexschool.io/api/dessertsweet/products/all";this.productLoading=!1,this.axios.get(t).then((t=>{this.products=t.data.products,this.productLoading=!0,this.getFavoriteData()})).catch((()=>{const t=I.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:t=>{t.addEventListener("mouseenter",I.stopTimer),t.addEventListener("mouseleave",I.resumeTimer)}});t.fire({icon:"error",title:"連線異常"})}))},updateFav(){this.favoriteData=JSON.parse(localStorage.getItem("fav"))||[]},getFavoriteData(){this.filterData=this.products.filter((t=>this.favoriteData.includes(t.id)))},addCart(t,e){e.target.childNodes[0].classList.remove("d-none");const i={product_id:t.id,qty:1},s="https://vue3-course-api.hexschool.io/api/dessertsweet/cart";this.isLoading=!0,this.axios.post(s,{data:i}).then((()=>{this.isLoading=!1,e.target.childNodes[0].classList.add("d-none"),M.Z.emit("updateCartsNum");const t=I.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:t=>{t.addEventListener("mouseenter",I.stopTimer),t.addEventListener("mouseleave",I.resumeTimer)}});t.fire({icon:"success",title:"成功加入購物車"})}))},more(t){const e=`https://vue3-course-api.hexschool.io/api/dessertsweet/product/${t}`;this.axios.get(e).then((()=>{this.$router.push(`/user/product/${t}`)})).catch((()=>{const t=I.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:t=>{t.addEventListener("mouseenter",I.stopTimer),t.addEventListener("mouseleave",I.resumeTimer)}});t.fire({icon:"error",title:"連線異常"})}))},addFav(t){if(this.favoriteData.includes(t.id)){this.favoriteData.splice(this.favoriteData.indexOf(t.id),1);const e=I.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:t=>{t.addEventListener("mouseenter",I.stopTimer),t.addEventListener("mouseleave",I.resumeTimer)}});e.fire({icon:"success",title:"成功移除收藏"})}else{this.favoriteData.push(t.id);const e=I.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:t=>{t.addEventListener("mouseenter",I.stopTimer),t.addEventListener("mouseleave",I.resumeTimer)}});e.fire({icon:"success",title:"成功加入收藏"})}localStorage.setItem("fav",JSON.stringify(this.favoriteData)),M.Z.emit("updateNum"),this.getFavoriteData()},onChange(t){const{value:e}=t.target;this.clickName=e}},computed:{updateProducts(){let t=[];return t=this.filterData,"價格排序低到高"===this.clickName?t.sort(((t,e)=>t.price-e.price)):"價格排序高到低"===this.clickName?t.sort(((t,e)=>e.price-t.price)):"熱銷商品"===this.clickName&&t.sort(((t,e)=>t.num-e.num)),t}},mounted(){this.getData(),this.updateFav(),this.getFavoriteData()}},Y=i(3744);const R=(0,Y.Z)(J,[["render",q]]);var A=R}}]);
//# sourceMappingURL=706.83afe462.js.map